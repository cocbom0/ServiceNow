<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="DELETE">
        <category>custom</category>
        <client_script><![CDATA[function($http,$rootScope, $filter,$timeout,spAriaUtil) {
	var c = this;
	
	c.options.title = c.options.title || "${Explore our Knowledge Bases}";
//	c.options.post_question_label = c.options.post_question_label || "${Ask a Question}";
//	c.options.create_article_label = c.options.create_article_label || "${Create Article}";
	c.isFirefox = false;
	c.showMoreLink = true;
	c.subscribedText = "${Subscribed}";
	c.unSubscribeText = "${Unsubscribe}";

	if(navigator.userAgent.toLowerCase().indexOf('firefox') > -1){
		c.isFirefox = true;
	}
	$rootScope.kb_count = c.data.total_kb_count;
	$rootScope.articles_count = c.data.total_articles_count;
	if (c.data.sqaUiActive)
		$rootScope.socialqa_count = c.data.total_socialqa_count;
	$rootScope.isMobile = c.data.isMobile;

	c.getOrderedItems = function() {
		return $filter('orderBy')(c.data.result, c.options.order_by, c.options.order_reverse);
	}
	c.focusFirstElement= function(e){
		$timeout(function(){$('div.kb-action-btns').children('ul').children('li:first-child').children('a').focus();})
	}
}]]></client_script>
        <controller_as>c</controller_as>
        <css>.kb-browse-block{&#13;
  margin: 0 -15px;&#13;
}&#13;
.kb-browse-section{&#13;
&#13;
  text-align: center;&#13;
  margin-left: auto;&#13;
  margin-right: auto;&#13;
  .kb-browse-title{&#13;
    padding-bottom:10px;&#13;
  }&#13;
  .kb-header {&#13;
    font-weight: normal;&#13;
  }&#13;
  .kb-header-block {&#13;
    display: inline-block;&#13;
    h2 {&#13;
      font-size: 23px;&#13;
    }&#13;
  }&#13;
  .vertical-divider {&#13;
    padding-right: 12px;&#13;
    border-right: 1px solid #bdc0c4;&#13;
    line-height: 40px;&#13;
  }&#13;
  .kb-action-btns {&#13;
    top: -3px;&#13;
    display: inline-block;&#13;
    position: relative;&#13;
    margin-left: 2px;&#13;
  }&#13;
  .action-btns {&#13;
    margin-left:10px;&#13;
    height: 34px;&#13;
  }&#13;
  .menu-padding {&#13;
    margin-top: 2px;&#13;
  }&#13;
  .kb-browse-content{&#13;
    margin: 0;&#13;
    .kb-tile-block {&#13;
&#13;
      .kb-tile{&#13;
        .kb-top-pad{&#13;
          padding-top:20px;&#13;
        }&#13;
        .subscribe-link{&#13;
          display:block;&#13;
          width: 100%;&#13;
          padding: 0px;&#13;
          text-decoration: none;&#13;
&#13;
          &amp;:focus{&#13;
            outline: none;&#13;
          }&#13;
          &amp;:focus &gt; .kb-subscribe{&#13;
            outline: 5px auto $brand-primary;&#13;
            outline-offset: -2px;&#13;
          }&#13;
        }&#13;
        .kb-top a{&#13;
          display:block;&#13;
        }&#13;
        .kb-subscribe{&#13;
          padding: 5px 10px;&#13;
          font-size: 16px;&#13;
          color:$brand-primary-darker;&#13;
          &#13;
          .unsub-icon i{&#13;
            padding-right:4px;&#13;
          }&#13;
          .sub-icon i{&#13;
            color: $text-muted;&#13;
            padding-right:7px;&#13;
          }&#13;
          .sub-text{&#13;
            color:$text-muted;&#13;
          }&#13;
          .unsub-text:hover span{&#13;
            display:none;&#13;
          }&#13;
          .unsub-text:hover:after{&#13;
            content:attr(data-hover);&#13;
          }&#13;
        }&#13;
        .kb-tile-link {&#13;
          padding:10px 5px;&#13;
          .link-icon img, .link-icon i{&#13;
            font-size: 50px;&#13;
            height:50px;&#13;
            color:#000000;&#13;
          }&#13;
          .link-text{&#13;
            height: 40px;&#13;
            padding:0 5px;&#13;
            h3 {&#13;
              color:$text-color;&#13;
              font-weight: normal;&#13;
              display:block;&#13;
              display: -webkit-box;&#13;
              font-size: 16px;&#13;
              -webkit-line-clamp: 2;&#13;
              -webkit-box-orient: vertical;&#13;
              overflow: hidden;&#13;
              text-overflow: ellipsis;&#13;
              text-align:center;&#13;
              line-height:1.2em;&#13;
            }&#13;
            .big-title{&#13;
              position:relative;&#13;
              line-height:1.2em;&#13;
              height:2.4em;&#13;
            }&#13;
            .big-title:after {&#13;
              content:"...";&#13;
              font-weight:bold;&#13;
              position:relative;&#13;
              bottom:0;&#13;
              right:0;&#13;
              letter-spacing: .10em;&#13;
            }&#13;
          }&#13;
        }&#13;
      }&#13;
    }&#13;
    .kb-hide-me {&#13;
      display: none;&#13;
    }&#13;
  }&#13;
	.kb-details{&#13;
      .kb-summary{&#13;
        padding:4px;&#13;
        .kb-count{&#13;
          padding:3px;&#13;
          font-size:13px;&#13;
          font-weight:400px;&#13;
        }&#13;
      }&#13;
    }&#13;
  .kb-bottom{&#13;
     padding:0px;&#13;
     button:hover,button:focus{&#13;
         background-color:$thumbnail-border;&#13;
    }&#13;
     .unsub-icon i:hover,.unsub-icon i:focus{&#13;
         color:$brand-primary-darker;&#13;
    }&#13;
  }&#13;
  .kb-show-more{&#13;
    padding-bottom: 15px;&#13;
&#13;
    .btn{&#13;
      text-decoration: none; &#13;
    }&#13;
&#13;
    .show_less i{&#13;
      vertical-align: middle;&#13;
    }&#13;
  }&#13;
}</css>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list>title,color,css</field_list>
        <has_preview>false</has_preview>
        <id>lh_csm_kb_bases_browse</id>
        <internal>false</internal>
        <link><![CDATA[function(scope,spAriaUtil) {
	var c = scope.c;
	$timeout = $injector.get('$timeout');
	spAriaUtil = $injector.get('spAriaUtil');
	c.toggleKbTiles = function(elm){
		$('.kb-browse-content .kb-hidden-tile').toggleClass('kb-hide-me');
		c.showMoreLink = !c.showMoreLink;

		if(elm == "more"){
			$('.kb-browse-content .kb-tile-block:nth-child(5) a:first').focus();
		}
	}
	
	c.updateSubscription = function(item, $event){
		$event.stopPropagation();
		$event.preventDefault();

		var input = {};
		input.id = item.sys_id;
		var notifySub = "";
		if(item.subscribed){
			input.action = 'unsubscribe';
			notifySub = "${Unsubscribed from knowledge base} "+ item.title;
		}else{
			input.action = 'subscribe';
			notifySub = "${Subscribed to knowledge base} "+ item.title;
		}

		c.server.get(input).then(function(r) {
			item.subscribed = !item.subscribed
			$timeout(function(){$('#subscribeButton_'+item.sys_id).focus()},0);
			//c.notity_subscription = notifySub;
			spAriaUtil.sendLiveMessage(notifySub);
		});
	};

	c.getKBLabel = function(kb,articleCount,questionCount,qaEnable){
		var kBLabel = '';
		if(qaEnable && c.data.sqaUiActive){
			kBLabel = c.data.kb_label_qa;
			kBLabel = kBLabel.toString().replace('{0}',kb).replace('{1}',articleCount).replace('{2}',questionCount);
		}else{
			kBLabel = c.data.kb_label;
			kBLabel = kBLabel.toString().replace('{0}',kb).replace('{1}',articleCount);
		}

		return kBLabel;
	};

	c.getTranslatedText = function(text, variable){
		return text.toString().replace('{0}',variable);
	};

	c.updateSubText = function(item,focus){

		if(focus){
			item.subscribedLabel=c.data.SUBSCRIBED_LABEL;
		//	$('.unsub_'+item.sys_id).html("<span>"+c.subscribedText+"</span>");
		}
		else{
			item.subscribedLabel=c.data.UNSUBSCRIBE_LABEL;
			//$('.unsub_'+item.sys_id).html("<span>"+c.unSubscribeText+"</span>");
		}

	};

	c.trimTitle = function(title){
		return title.substring(0,27);
	};
}]]></link>
        <name>LH CSM Knowledge Bases Browse</name>
        <option_schema>[{"hint":"Field to order Knowledge bases tiles","name":"order_by","default_value":"title","label":"Order By","type":"string"},{"hint":"Reverse the selected order","name":"order_reverse","default_value":"false","label":"Reverse Order","type":"boolean"},{"hint":"Label for Post Question","name":"post_question_label","default_value":"","label":"Post Question Label","type":"string"},{"hint":"Label for Create Article","name":"create_article_label","default_value":"","label":"Create Article Label","type":"string"},{"hint":"Url for Post Question","name":"post_question_url","default_value":"?id=sqanda_new_question","label":"Post Question Url","type":"string"},{"hint":"Url for Create Article","name":"create_article_url","default_value":"knowledge_create.do?sys_id=-1&amp;sysparm_stack=kb","label":"Create Article Url","type":"string"}]</option_schema>
        <public>true</public>
        <roles/>
        <script><![CDATA[(function() {	
	if(input){
		var status = "failed";
        if(input.id && input.action){
			if(input.action == "subscribe"){
				subscribeKB(input.id);
				status ="success";
			}else if(input.action == "unsubscribe"){
				unSubscribeKB(input.id);
				status ="success";
			}
		}
		data.status = status;
	}else{
		data.sqaUiActive = GlidePluginManager.isActive('com.snc.knowledge.social_qa.ui');
		options.order_by = options.order_by ? options.order_by : "title";
		options.order_reverse = options.order_reverse ? options.order_reverse == 'true': false;
		data.instanceid = $sp.getDisplayValue("sys_id");
		data.kb_label = gs.getMessage('{0} -{1} knowledge base articles');
		data.kb_label_qa = gs.getMessage('{0} - {1} knowledge base articles and {2} questions');
		data.SUBSCRIBED_LABEL= gs.getMessage('Subscribed');
		data.UNSUBSCRIBE_LABEL = gs.getMessage('Unsubscribe');
		data.SUBSCRIBE_LABEL= gs.getMessage('Subscribe');

		var kbService = new KBPortalService();
		options.knowledge_bases = options.knowledge_bases || String(kbService.getServicePortalKnowledgeBases($sp.getPortalRecord().url_suffix)) || "";
		data.isMobile = kbService.isMobile();
		/* data.result = kbService.getMyKnowledgeBases(options.order_by,options.knowledge_bases); COT BU-VM : Engine Compliance Project | old */
		data.result = checkAndCleanItemList(kbService.getMyKnowledgeBases(options.order_by,options.knowledge_bases)); /* COT BU-VM : Engine Compliance Project | new */
		var kbCount = data.result.length;
		var articleCount = 0;
		var socailqaCount = 0;

		data.result.forEach(function(key){
			articleCount = articleCount + parseInt(key.article_count,10);
			if (data.sqaUiActive)
				socailqaCount = socailqaCount + parseInt(key.questions_count,10);

		});

		var canSuscribe = false;
		var canCreateArticle = false;
		var canPostQuestion = false;
		var kbService2 = new KBPortalService();
		canSuscribe = kbService2.canSubscribe();
		canCreateArticle = kbService2.canCreateArticle(options.knowledge_bases);
		canPostQuestion = kbService2.canPostQuestion(options.knowledge_bases);

		data.total_kb_count = kbCount;
		data.total_articles_count = articleCount;
		if (data.sqaUiActive)
			data.total_socialqa_count = socailqaCount;
		data.canSuscribe = canSuscribe;
		data.canCreateArticle = canCreateArticle;
		data.canPostQuestion = canPostQuestion;
		data.subscribeText = gs.getMessage("Subscribe to knowledge base {0}")
		data.unsubscribeText = gs.getMessage("Unsubscribe from knowledge base {0}");
		data.moreActionsLabel = gs.getMessage("Actions");
		data.moreActionsAriaLabel = gs.getMessage("More actions");
	}
	
	/* COT BU-VM : Engine Compliance Project | new.start */
	data.excludedKB = getKBToExclude();
	/* COT BU-VM : Engine Compliance Project | new.end */

	function subscribeKB(kbID){
		var context = global.ActivitySubscriptionContext.getContext();
		context.getSubscriptionService().subscribe("722d67c367003200d358bb2d07415a9c",kbID);
	}

	function unSubscribeKB(kbID){
		var context = global.ActivitySubscriptionContext.getContext();
		context.getSubscriptionService().unsubscribe(kbID);
	}
})();

/* COT BU-VM : Engine Compliance Project | new.start */
function getKBToExclude() {
	var knowledgeBase = [];
	var gr = new GlideRecord("sys_properties");
	gr.addQuery("name", "sn_km_portal.LH_kb_to_exclude");
	gr.query();
	
	if(gr.next()) {
		knowledgeBase = (gr.getValue("value")).split("|");
	}

	return knowledgeBase;
}

function kbIsActive(itemSysId, excludedKB) {
	var active = true;
	var i = 0;

	while(i < excludedKB.length && active) {
		if(excludedKB[i] === itemSysId) {
			active = false;
		}
		i++;
	}

	return active;
}

function checkAndCleanItemList(itemList) {
	var cleanList = [];
	var excludedKB = getKBToExclude();
	var i = 0;
	
	for(i; i< itemList.length; i++) {
		if(kbIsActive(itemList[i].sys_id, excludedKB)) {
			cleanList.push(itemList[i]);
		}
	}
	
	return cleanList;
}
/* COT BU-VM : Engine Compliance Project | new.end */]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2023-03-31 11:44:30</sys_created_on>
        <sys_id>01c6282b1b3121505bdeed71f54bcb32</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>LH CSM Knowledge Bases Browse</sys_name>
        <sys_package display_value="Support case" source="x_liisa_support_ca">80d47c06dba7f05001eafad3f3961926</sys_package>
        <sys_policy/>
        <sys_scope display_value="Support case">80d47c06dba7f05001eafad3f3961926</sys_scope>
        <sys_update_name>sp_widget_01c6282b1b3121505bdeed71f54bcb32</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2023-03-31 11:44:30</sys_updated_on>
        <template><![CDATA[<div class="kb-browse-{{::c.data.instanceid}} kb-browse-block">
  <div class="kb-browse-section self-clear col-xs-12">
    <span aria-live="assertive" class="sr-only ng-binding" role="alert">{{c.notity_subscription}}</span>
    <div class="kb-browse-title">
      <div class="kb-header-block">
        <h2 class="kb-header hidden-xs" ng-class="{'': c.data.canCreateArticle || c.data.canPostQuestion}" ng-bind="::c.options.title"></h2>
        <h2 id="kbBrowseTitle" class="kb-header hidden-md hidden-lg hidden-sm visible-xs" ng-class="{'': c.data.canCreateArticle || c.data.canPostQuestion}" ng-bind="::c.options.title"></h2>
      </div>
    </div>
    <div class="kb-browse-content self-clear">
      <div class="kb-browse-tiles" ng-class="c.data.result.length > 3 ? 'kb-browse-tiles-more' : c.data.result.length > 2 ? 'kb-browse-tiles-3' : c.data.result.length > 1 ? 'kb-browse-tiles-2' : 'kb-browse-tiles-1'" aria-labelledby="kbBrowseTitle" role="list">
        <div class="kb-tile-block col-xs-6 col-sm-6 col-md-3" role="group" ng-class="{'kb-tile-block-more':c.data.result.length > 4,'kb-tile-block-4':c.data.result.length == 4,'kb-tile-block-3':c.data.result.length == 3,'kb-tile-block-2':c.data.result.length == 2,'kb-tile-block-1':c.data.result.length == 1,'kb-hidden-tile kb-hide-me':$index > 3}"
             data-ng-repeat="item in c.getOrderedItems() track by item.sys_id" role="listitem">
          <div class="kb-tile panel panel-{{::options.color}}">
            <div class="kb-top kb-tile-link kb-center" >
              <a href="?id=kb_search&kb_knowledge_base={{::item.sys_id}}" aria-label="${{{::c.getKBLabel(item.title,item.article_count,item.questions_count,item.enable_socialqa)}}}">
                <div class="link-icon">
                  <img alt="" src="default_knowledge_base.svg" aria-hidden="true" data-ng-if="!item.icon"/>
                  <img alt="" data-ng-src="{{::item.icon}}.iix" aria-hidden="true" data-ng-if="item.icon"/>
                </div>
                <div ng-if="!c.isFirefox" class="link-text" title="${knowledge base}">
                        <h3 id="{{'kbTitle'+$index}}" ng-bind="::item.title"></h3>
                </div>
                <div ng-if="c.isFirefox" class="link-text" title="${knowledge base}">
                        <h3 ng-if="item.title.length < 27" ng-bind="::item.title"></h3>
                        <h3 ng-if="item.title.length > 26" class="big-title" ng-bind="::c.trimTitle(item.title)"></h3>
                </div>
                <div class="kb-details" ng-if="item.article_count || item.article_count == 0 || (item.enable_socialqa && (item.questions_count || item.questions_count == 0))">
                  <span class="kb-summary">
                    <i class="fa fa-file-text" aria-hidden="true"></i>
                    <span class="kb-count" ng-bind="::item.article_count"></span>
                  </span>
                  <span title="${Social Q&A}" ng-if="item.enable_socialqa && c.data.sqaUiActive">
                    <span class="kb-summary">
                      <i class="fa fa-question-circle" aria-hidden="true"></i>
                      <span class="kb-count" ng-bind="::item.questions_count"></span>
                    </span>
                  </span>
                </div>
              </a>                    
            </div>
            <div class="kb-bottom panel-footer" ng-class="{'kb-top-pad':!c.data.canSuscribe}">
              <button ng-if="c.data.canSuscribe && !item.subscribed" 
                      id="subscribeButton_{{::item.sys_id}}"
                      ng-click="::c.updateSubscription(item, $event)"
                      class="subscribe-link sublink_{{::item.sys_id}} btn btn-link kb-subscribe"  
                      ng-focus="::c.updateSubText(item,0)"
                      ng-blur="::c.updateSubText(item,1)"
                      >
                <span class="sub-icon">
                	<i class="fa fa-circle-o" aria-hidden="true"></i>
                  <span class="sub-text" aria-hidden="true">{{c.data.SUBSCRIBE_LABEL}}</span>
                  <span class="sr-only">{{c.getTranslatedText(c.data.subscribeText, item.title)}}</span>
                </span>
              </button>
                
              <button ng-if="c.data.canSuscribe && item.subscribed"
                      id="subscribeButton_{{::item.sys_id}}"
                      ng-click="::c.updateSubscription(item, $event)"                      
                      class="subscribe-link sublink_{{::item.sys_id}} btn btn-link kb-subscribe"  
                      ng-focus="::c.updateSubText(item,0)"
                      ng-mouseover="::c.updateSubText(item,0)"
                      ng-blur="::c.updateSubText(item,1)"
                      ng-mouseleave="c.updateSubText(item,1)">
                <span class="unsub-icon">
                  <i class="fa fa-check-circle" aria-hidden="true"></i>
                  <span data-hover="${Unsubscribe}" class="unsub-text unsub_{{::item.sys_id}}">
                    <span aria-hidden="true">{{item.subscribedLabel?item.subscribedLabel:c.data.SUBSCRIBED_LABEL}}</span>
                    <span class="sr-only">{{c.getTranslatedText(c.data.unsubscribeText, item.title)}}</span>
                  </span>
                </span>
              
              </button>
            </div>
         </div>
      </div>
    </div>
    <div class="kb-show-more self-clear col-xs-12" data-ng-if="c.data.result ? c.data.result.length > 4 : false">
      <button class="btn btn-link" aria-expanded="{{!c.showMoreLink}}" data-ng-click="c.showMoreLink ? c.toggleKbTiles('more') : c.toggleKbTiles('less')">
        <span class="show_more"  data-ng-if="c.showMoreLink">
          <span class="sr-only">${Show All Knowledge Bases}</span>
          <span aria-hidden="true">${Show All}&nbsp;<i class="fa fa-plus" aria-hidden="true"></i></span>
        </span>
        <span class="show_less"  data-ng-if="!c.showMoreLink">
          <span class="sr-only">${Show Less Knowledge Bases}</span>
          <span aria-hidden="true">${Show Less}&nbsp;<i class="fa fa-minus" aria-hidden="true"></i></span>
        </span>
      </button>
    </div>
  </div>
</div>
<style>
  .kb-browse-{{::c.data.instanceid}} .kb-browse-tiles{
    display: table;
    margin: 0 auto;
  }
  .kb-browse-{{::c.data.instanceid}} .kb-browse-tiles-more{
    display: block;
    margin: 0 5rem;
  }
  /*---------------------------- */
  .kb-browse-{{::c.data.instanceid}} .kb-tile-block {
    padding: 0 1rem;
    width:25rem;
  }
  .kb-browse-{{::c.data.instanceid}} .kb-tile-block-more {
    padding: 0 1rem;
    width:25%;
  }
  @media screen and (max-width: 1200px){
    .kb-browse-{{::c.data.instanceid}} .kb-browse-tiles{
      margin: 0 5rem;
      display: flex;
      margin: 0 auto;
    }
    .kb-browse-{{::c.data.instanceid}} .kb-browse-tiles-more{
      display: block;
      margin: 0 15rem;
    }
    .kb-browse-{{::c.data.instanceid}} .kb-browse-tiles-2{
      display: table;
      margin: 0 auto;
    }
    .kb-browse-{{::c.data.instanceid}} .kb-browse-tiles-1{
      display: table;
      margin: 0 auto;
    }
    /*---------------------------- */
    .kb-browse-{{::c.data.instanceid}} .kb-tile-block {
      padding: 0 1rem;
      width:50%
    }
    .kb-browse-{{::c.data.instanceid}} .kb-tile-block-2{
      width:25rem;
    }
    .kb-browse-{{::c.data.instanceid}} .kb-tile-block-1{
      width:25rem;
    }
  }
  @media screen and (max-width: 798px){

    .kb-browse-{{::c.data.instanceid}} .kb-browse-tiles{
      display: table;
      margin: 0 auto;
    }
    .kb-browse-{{::c.data.instanceid}} .kb-browse-tiles-3{
      display: block;
      margin: 0 auto;
    }
    /*---------------------------- */
    .kb-browse-{{::c.data.instanceid}} .kb-tile-block {
      padding: 0 1rem;
      width:50%;
    }
    .kb-browse-{{::c.data.instanceid}} .kb-tile-block-2{
      width:25rem;
    }
    .kb-browse-{{::c.data.instanceid}} .kb-tile-block-1{
      width:25rem;
    }
  }
  @media screen and (max-width: 546px){

    .kb-browse-{{::c.data.instanceid}} .kb-browse-tiles-3{
      display: block;
      margin: 0 auto;
    }
    .kb-browse-{{::c.data.instanceid}} .kb-browse-tiles-2{
      display: flex;
      margin: 0 auto;
    }
    .kb-browse-{{::c.data.instanceid}} .kb-browse-tiles-1{
      display: table;
      margin: 0 auto;
    }
    /*---------------------------- */
    .kb-browse-{{::c.data.instanceid}} .kb-tile-block {
      padding: 0 0.4rem;
    }
    .kb-browse-{{::c.data.instanceid}} .kb-tile-block-2{
      width:50%;
    }
    .kb-browse-{{::c.data.instanceid}} .kb-tile-block-1{
      width:25rem;
    }
  }


</style>]]></template>
    </sp_widget>
<sys_update_version action="INSERT_OR_UPDATE">
        <action>DELETE</action>
        <application display_value="Support case">80d47c06dba7f05001eafad3f3961926</application>
        <file_path/>
        <instance_id>36d32cc3db0ee5d88aea21c4059619b9</instance_id>
        <instance_name>liebherrcsmtest</instance_name>
        <name>sp_widget_01c6282b1b3121505bdeed71f54bcb32</name>
        <payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sp_widget"&gt;
    &lt;sp_widget action="INSERT_OR_UPDATE"&gt;
        &lt;category&gt;custom&lt;/category&gt;
        &lt;client_script&gt;&lt;![CDATA[function($http,$rootScope, $filter,$timeout,spAriaUtil) {
	var c = this;
	
	c.options.title = c.options.title || "${Explore our Knowledge Bases}";
//	c.options.post_question_label = c.options.post_question_label || "${Ask a Question}";
//	c.options.create_article_label = c.options.create_article_label || "${Create Article}";
	c.isFirefox = false;
	c.showMoreLink = true;
	c.subscribedText = "${Subscribed}";
	c.unSubscribeText = "${Unsubscribe}";

	if(navigator.userAgent.toLowerCase().indexOf('firefox') &gt; -1){
		c.isFirefox = true;
	}
	$rootScope.kb_count = c.data.total_kb_count;
	$rootScope.articles_count = c.data.total_articles_count;
	if (c.data.sqaUiActive)
		$rootScope.socialqa_count = c.data.total_socialqa_count;
	$rootScope.isMobile = c.data.isMobile;

	c.getOrderedItems = function() {
		return $filter('orderBy')(c.data.result, c.options.order_by, c.options.order_reverse);
	}
	c.focusFirstElement= function(e){
		$timeout(function(){$('div.kb-action-btns').children('ul').children('li:first-child').children('a').focus();})
	}
}]]&gt;&lt;/client_script&gt;
        &lt;controller_as&gt;c&lt;/controller_as&gt;
        &lt;css&gt;.kb-browse-block{&amp;#13;
  margin: 0 -15px;&amp;#13;
}&amp;#13;
.kb-browse-section{&amp;#13;
&amp;#13;
  text-align: center;&amp;#13;
  margin-left: auto;&amp;#13;
  margin-right: auto;&amp;#13;
  .kb-browse-title{&amp;#13;
    padding-bottom:10px;&amp;#13;
  }&amp;#13;
  .kb-header {&amp;#13;
    font-weight: normal;&amp;#13;
  }&amp;#13;
  .kb-header-block {&amp;#13;
    display: inline-block;&amp;#13;
    h2 {&amp;#13;
      font-size: 23px;&amp;#13;
    }&amp;#13;
  }&amp;#13;
  .vertical-divider {&amp;#13;
    padding-right: 12px;&amp;#13;
    border-right: 1px solid #bdc0c4;&amp;#13;
    line-height: 40px;&amp;#13;
  }&amp;#13;
  .kb-action-btns {&amp;#13;
    top: -3px;&amp;#13;
    display: inline-block;&amp;#13;
    position: relative;&amp;#13;
    margin-left: 2px;&amp;#13;
  }&amp;#13;
  .action-btns {&amp;#13;
    margin-left:10px;&amp;#13;
    height: 34px;&amp;#13;
  }&amp;#13;
  .menu-padding {&amp;#13;
    margin-top: 2px;&amp;#13;
  }&amp;#13;
  .kb-browse-content{&amp;#13;
    margin: 0;&amp;#13;
    .kb-tile-block {&amp;#13;
&amp;#13;
      .kb-tile{&amp;#13;
        .kb-top-pad{&amp;#13;
          padding-top:20px;&amp;#13;
        }&amp;#13;
        .subscribe-link{&amp;#13;
          display:block;&amp;#13;
          width: 100%;&amp;#13;
          padding: 0px;&amp;#13;
          text-decoration: none;&amp;#13;
&amp;#13;
          &amp;amp;:focus{&amp;#13;
            outline: none;&amp;#13;
          }&amp;#13;
          &amp;amp;:focus &amp;gt; .kb-subscribe{&amp;#13;
            outline: 5px auto $brand-primary;&amp;#13;
            outline-offset: -2px;&amp;#13;
          }&amp;#13;
        }&amp;#13;
        .kb-top a{&amp;#13;
          display:block;&amp;#13;
        }&amp;#13;
        .kb-subscribe{&amp;#13;
          padding: 5px 10px;&amp;#13;
          font-size: 16px;&amp;#13;
          color:$brand-primary-darker;&amp;#13;
          &amp;#13;
          .unsub-icon i{&amp;#13;
            padding-right:4px;&amp;#13;
          }&amp;#13;
          .sub-icon i{&amp;#13;
            color: $text-muted;&amp;#13;
            padding-right:7px;&amp;#13;
          }&amp;#13;
          .sub-text{&amp;#13;
            color:$text-muted;&amp;#13;
          }&amp;#13;
          .unsub-text:hover span{&amp;#13;
            display:none;&amp;#13;
          }&amp;#13;
          .unsub-text:hover:after{&amp;#13;
            content:attr(data-hover);&amp;#13;
          }&amp;#13;
        }&amp;#13;
        .kb-tile-link {&amp;#13;
          padding:10px 5px;&amp;#13;
          .link-icon img, .link-icon i{&amp;#13;
            font-size: 50px;&amp;#13;
            height:50px;&amp;#13;
            color:#000000;&amp;#13;
          }&amp;#13;
          .link-text{&amp;#13;
            height: 40px;&amp;#13;
            padding:0 5px;&amp;#13;
            h3 {&amp;#13;
              color:$text-color;&amp;#13;
              font-weight: normal;&amp;#13;
              display:block;&amp;#13;
              display: -webkit-box;&amp;#13;
              font-size: 16px;&amp;#13;
              -webkit-line-clamp: 2;&amp;#13;
              -webkit-box-orient: vertical;&amp;#13;
              overflow: hidden;&amp;#13;
              text-overflow: ellipsis;&amp;#13;
              text-align:center;&amp;#13;
              line-height:1.2em;&amp;#13;
            }&amp;#13;
            .big-title{&amp;#13;
              position:relative;&amp;#13;
              line-height:1.2em;&amp;#13;
              height:2.4em;&amp;#13;
            }&amp;#13;
            .big-title:after {&amp;#13;
              content:"...";&amp;#13;
              font-weight:bold;&amp;#13;
              position:relative;&amp;#13;
              bottom:0;&amp;#13;
              right:0;&amp;#13;
              letter-spacing: .10em;&amp;#13;
            }&amp;#13;
          }&amp;#13;
        }&amp;#13;
      }&amp;#13;
    }&amp;#13;
    .kb-hide-me {&amp;#13;
      display: none;&amp;#13;
    }&amp;#13;
  }&amp;#13;
	.kb-details{&amp;#13;
      .kb-summary{&amp;#13;
        padding:4px;&amp;#13;
        .kb-count{&amp;#13;
          padding:3px;&amp;#13;
          font-size:13px;&amp;#13;
          font-weight:400px;&amp;#13;
        }&amp;#13;
      }&amp;#13;
    }&amp;#13;
  .kb-bottom{&amp;#13;
     padding:0px;&amp;#13;
     button:hover,button:focus{&amp;#13;
         background-color:$thumbnail-border;&amp;#13;
    }&amp;#13;
     .unsub-icon i:hover,.unsub-icon i:focus{&amp;#13;
         color:$brand-primary-darker;&amp;#13;
    }&amp;#13;
  }&amp;#13;
  .kb-show-more{&amp;#13;
    padding-bottom: 15px;&amp;#13;
&amp;#13;
    .btn{&amp;#13;
      text-decoration: none; &amp;#13;
    }&amp;#13;
&amp;#13;
    .show_less i{&amp;#13;
      vertical-align: middle;&amp;#13;
    }&amp;#13;
  }&amp;#13;
}&lt;/css&gt;
        &lt;data_table&gt;sp_instance&lt;/data_table&gt;
        &lt;demo_data/&gt;
        &lt;description/&gt;
        &lt;docs/&gt;
        &lt;field_list&gt;title,color,css&lt;/field_list&gt;
        &lt;has_preview&gt;false&lt;/has_preview&gt;
        &lt;id&gt;lh_csm_kb_bases_browse&lt;/id&gt;
        &lt;internal&gt;false&lt;/internal&gt;
        &lt;link&gt;&lt;![CDATA[function(scope,spAriaUtil) {
	var c = scope.c;
	$timeout = $injector.get('$timeout');
	spAriaUtil = $injector.get('spAriaUtil');
	c.toggleKbTiles = function(elm){
		$('.kb-browse-content .kb-hidden-tile').toggleClass('kb-hide-me');
		c.showMoreLink = !c.showMoreLink;

		if(elm == "more"){
			$('.kb-browse-content .kb-tile-block:nth-child(5) a:first').focus();
		}
	}
	
	c.updateSubscription = function(item, $event){
		$event.stopPropagation();
		$event.preventDefault();

		var input = {};
		input.id = item.sys_id;
		var notifySub = "";
		if(item.subscribed){
			input.action = 'unsubscribe';
			notifySub = "${Unsubscribed from knowledge base} "+ item.title;
		}else{
			input.action = 'subscribe';
			notifySub = "${Subscribed to knowledge base} "+ item.title;
		}

		c.server.get(input).then(function(r) {
			item.subscribed = !item.subscribed
			$timeout(function(){$('#subscribeButton_'+item.sys_id).focus()},0);
			//c.notity_subscription = notifySub;
			spAriaUtil.sendLiveMessage(notifySub);
		});
	};

	c.getKBLabel = function(kb,articleCount,questionCount,qaEnable){
		var kBLabel = '';
		if(qaEnable &amp;&amp; c.data.sqaUiActive){
			kBLabel = c.data.kb_label_qa;
			kBLabel = kBLabel.toString().replace('{0}',kb).replace('{1}',articleCount).replace('{2}',questionCount);
		}else{
			kBLabel = c.data.kb_label;
			kBLabel = kBLabel.toString().replace('{0}',kb).replace('{1}',articleCount);
		}

		return kBLabel;
	};

	c.getTranslatedText = function(text, variable){
		return text.toString().replace('{0}',variable);
	};

	c.updateSubText = function(item,focus){

		if(focus){
			item.subscribedLabel=c.data.SUBSCRIBED_LABEL;
		//	$('.unsub_'+item.sys_id).html("&lt;span&gt;"+c.subscribedText+"&lt;/span&gt;");
		}
		else{
			item.subscribedLabel=c.data.UNSUBSCRIBE_LABEL;
			//$('.unsub_'+item.sys_id).html("&lt;span&gt;"+c.unSubscribeText+"&lt;/span&gt;");
		}

	};

	c.trimTitle = function(title){
		return title.substring(0,27);
	};
}]]&gt;&lt;/link&gt;
        &lt;name&gt;LH CSM Knowledge Bases Browse&lt;/name&gt;
        &lt;option_schema&gt;[{"hint":"Field to order Knowledge bases tiles","name":"order_by","default_value":"title","label":"Order By","type":"string"},{"hint":"Reverse the selected order","name":"order_reverse","default_value":"false","label":"Reverse Order","type":"boolean"},{"hint":"Label for Post Question","name":"post_question_label","default_value":"","label":"Post Question Label","type":"string"},{"hint":"Label for Create Article","name":"create_article_label","default_value":"","label":"Create Article Label","type":"string"},{"hint":"Url for Post Question","name":"post_question_url","default_value":"?id=sqanda_new_question","label":"Post Question Url","type":"string"},{"hint":"Url for Create Article","name":"create_article_url","default_value":"knowledge_create.do?sys_id=-1&amp;amp;sysparm_stack=kb","label":"Create Article Url","type":"string"}]&lt;/option_schema&gt;
        &lt;public&gt;true&lt;/public&gt;
        &lt;roles/&gt;
        &lt;script&gt;&lt;![CDATA[(function() {	
	if(input){
		var status = "failed";
        if(input.id &amp;&amp; input.action){
			if(input.action == "subscribe"){
				subscribeKB(input.id);
				status ="success";
			}else if(input.action == "unsubscribe"){
				unSubscribeKB(input.id);
				status ="success";
			}
		}
		data.status = status;
	}else{
		data.sqaUiActive = GlidePluginManager.isActive('com.snc.knowledge.social_qa.ui');
		options.order_by = options.order_by ? options.order_by : "title";
		options.order_reverse = options.order_reverse ? options.order_reverse == 'true': false;
		data.instanceid = $sp.getDisplayValue("sys_id");
		data.kb_label = gs.getMessage('{0} -{1} knowledge base articles');
		data.kb_label_qa = gs.getMessage('{0} - {1} knowledge base articles and {2} questions');
		data.SUBSCRIBED_LABEL= gs.getMessage('Subscribed');
		data.UNSUBSCRIBE_LABEL = gs.getMessage('Unsubscribe');
		data.SUBSCRIBE_LABEL= gs.getMessage('Subscribe');

		var kbService = new KBPortalService();
		options.knowledge_bases = options.knowledge_bases || String(kbService.getServicePortalKnowledgeBases($sp.getPortalRecord().url_suffix)) || "";
		data.isMobile = kbService.isMobile();
		/* data.result = kbService.getMyKnowledgeBases(options.order_by,options.knowledge_bases); COT BU-VM : Engine Compliance Project | old */
		data.result = checkAndCleanItemList(kbService.getMyKnowledgeBases(options.order_by,options.knowledge_bases)); /* COT BU-VM : Engine Compliance Project | new */
		var kbCount = data.result.length;
		var articleCount = 0;
		var socailqaCount = 0;

		data.result.forEach(function(key){
			articleCount = articleCount + parseInt(key.article_count,10);
			if (data.sqaUiActive)
				socailqaCount = socailqaCount + parseInt(key.questions_count,10);

		});

		var canSuscribe = false;
		var canCreateArticle = false;
		var canPostQuestion = false;
		var kbService2 = new KBPortalService();
		canSuscribe = kbService2.canSubscribe();
		canCreateArticle = kbService2.canCreateArticle(options.knowledge_bases);
		canPostQuestion = kbService2.canPostQuestion(options.knowledge_bases);

		data.total_kb_count = kbCount;
		data.total_articles_count = articleCount;
		if (data.sqaUiActive)
			data.total_socialqa_count = socailqaCount;
		data.canSuscribe = canSuscribe;
		data.canCreateArticle = canCreateArticle;
		data.canPostQuestion = canPostQuestion;
		data.subscribeText = gs.getMessage("Subscribe to knowledge base {0}")
		data.unsubscribeText = gs.getMessage("Unsubscribe from knowledge base {0}");
		data.moreActionsLabel = gs.getMessage("Actions");
		data.moreActionsAriaLabel = gs.getMessage("More actions");
	}
	
	/* COT BU-VM : Engine Compliance Project | new.start */
	data.excludedKB = getKBToExclude();
	/* COT BU-VM : Engine Compliance Project | new.end */

	function subscribeKB(kbID){
		var context = global.ActivitySubscriptionContext.getContext();
		context.getSubscriptionService().subscribe("722d67c367003200d358bb2d07415a9c",kbID);
	}

	function unSubscribeKB(kbID){
		var context = global.ActivitySubscriptionContext.getContext();
		context.getSubscriptionService().unsubscribe(kbID);
	}
})();

/* COT BU-VM : Engine Compliance Project | new.start */
function getKBToExclude() {
	var knowledgeBase = [];
	var gr = new GlideRecord("sys_properties");
	gr.addQuery("name", "sn_km_portal.LH_kb_to_exclude");
	gr.query();
	
	if(gr.next()) {
		knowledgeBase = (gr.getValue("value")).split("|");
	}

	return knowledgeBase;
}

function kbIsActive(itemSysId, excludedKB) {
	var active = true;
	var i = 0;

	while(i &lt; excludedKB.length &amp;&amp; active) {
		if(excludedKB[i] === itemSysId) {
			active = false;
		}
		i++;
	}

	return active;
}

function checkAndCleanItemList(itemList) {
	var cleanList = [];
	var excludedKB = getKBToExclude();
	var i = 0;
	
	for(i; i&lt; itemList.length; i++) {
		if(kbIsActive(itemList[i].sys_id, excludedKB)) {
			cleanList.push(itemList[i]);
		}
	}
	
	return cleanList;
}
/* COT BU-VM : Engine Compliance Project | new.end */]]&gt;&lt;/script&gt;
        &lt;servicenow&gt;false&lt;/servicenow&gt;
        &lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;
        &lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;
        &lt;sys_created_on&gt;2023-03-31 11:44:30&lt;/sys_created_on&gt;
        &lt;sys_id&gt;01c6282b1b3121505bdeed71f54bcb32&lt;/sys_id&gt;
        &lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;
        &lt;sys_name&gt;LH CSM Knowledge Bases Browse&lt;/sys_name&gt;
        &lt;sys_package display_value="Support case" source="x_liisa_support_ca"&gt;80d47c06dba7f05001eafad3f3961926&lt;/sys_package&gt;
        &lt;sys_policy/&gt;
        &lt;sys_scope display_value="Support case"&gt;80d47c06dba7f05001eafad3f3961926&lt;/sys_scope&gt;
        &lt;sys_update_name&gt;sp_widget_01c6282b1b3121505bdeed71f54bcb32&lt;/sys_update_name&gt;
        &lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;
        &lt;sys_updated_on&gt;2023-03-31 11:44:30&lt;/sys_updated_on&gt;
        &lt;template&gt;&lt;![CDATA[&lt;div class="kb-browse-{{::c.data.instanceid}} kb-browse-block"&gt;
  &lt;div class="kb-browse-section self-clear col-xs-12"&gt;
    &lt;span aria-live="assertive" class="sr-only ng-binding" role="alert"&gt;{{c.notity_subscription}}&lt;/span&gt;
    &lt;div class="kb-browse-title"&gt;
      &lt;div class="kb-header-block"&gt;
        &lt;h2 class="kb-header hidden-xs" ng-class="{'': c.data.canCreateArticle || c.data.canPostQuestion}" ng-bind="::c.options.title"&gt;&lt;/h2&gt;
        &lt;h2 id="kbBrowseTitle" class="kb-header hidden-md hidden-lg hidden-sm visible-xs" ng-class="{'': c.data.canCreateArticle || c.data.canPostQuestion}" ng-bind="::c.options.title"&gt;&lt;/h2&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="kb-browse-content self-clear"&gt;
      &lt;div class="kb-browse-tiles" ng-class="c.data.result.length &gt; 3 ? 'kb-browse-tiles-more' : c.data.result.length &gt; 2 ? 'kb-browse-tiles-3' : c.data.result.length &gt; 1 ? 'kb-browse-tiles-2' : 'kb-browse-tiles-1'" aria-labelledby="kbBrowseTitle" role="list"&gt;
        &lt;div class="kb-tile-block col-xs-6 col-sm-6 col-md-3" role="group" ng-class="{'kb-tile-block-more':c.data.result.length &gt; 4,'kb-tile-block-4':c.data.result.length == 4,'kb-tile-block-3':c.data.result.length == 3,'kb-tile-block-2':c.data.result.length == 2,'kb-tile-block-1':c.data.result.length == 1,'kb-hidden-tile kb-hide-me':$index &gt; 3}"
             data-ng-repeat="item in c.getOrderedItems() track by item.sys_id" role="listitem"&gt;
          &lt;div class="kb-tile panel panel-{{::options.color}}"&gt;
            &lt;div class="kb-top kb-tile-link kb-center" &gt;
              &lt;a href="?id=kb_search&amp;kb_knowledge_base={{::item.sys_id}}" aria-label="${{{::c.getKBLabel(item.title,item.article_count,item.questions_count,item.enable_socialqa)}}}"&gt;
                &lt;div class="link-icon"&gt;
                  &lt;img alt="" src="default_knowledge_base.svg" aria-hidden="true" data-ng-if="!item.icon"/&gt;
                  &lt;img alt="" data-ng-src="{{::item.icon}}.iix" aria-hidden="true" data-ng-if="item.icon"/&gt;
                &lt;/div&gt;
                &lt;div ng-if="!c.isFirefox" class="link-text" title="${knowledge base}"&gt;
                        &lt;h3 id="{{'kbTitle'+$index}}" ng-bind="::item.title"&gt;&lt;/h3&gt;
                &lt;/div&gt;
                &lt;div ng-if="c.isFirefox" class="link-text" title="${knowledge base}"&gt;
                        &lt;h3 ng-if="item.title.length &lt; 27" ng-bind="::item.title"&gt;&lt;/h3&gt;
                        &lt;h3 ng-if="item.title.length &gt; 26" class="big-title" ng-bind="::c.trimTitle(item.title)"&gt;&lt;/h3&gt;
                &lt;/div&gt;
                &lt;div class="kb-details" ng-if="item.article_count || item.article_count == 0 || (item.enable_socialqa &amp;&amp; (item.questions_count || item.questions_count == 0))"&gt;
                  &lt;span class="kb-summary"&gt;
                    &lt;i class="fa fa-file-text" aria-hidden="true"&gt;&lt;/i&gt;
                    &lt;span class="kb-count" ng-bind="::item.article_count"&gt;&lt;/span&gt;
                  &lt;/span&gt;
                  &lt;span title="${Social Q&amp;A}" ng-if="item.enable_socialqa &amp;&amp; c.data.sqaUiActive"&gt;
                    &lt;span class="kb-summary"&gt;
                      &lt;i class="fa fa-question-circle" aria-hidden="true"&gt;&lt;/i&gt;
                      &lt;span class="kb-count" ng-bind="::item.questions_count"&gt;&lt;/span&gt;
                    &lt;/span&gt;
                  &lt;/span&gt;
                &lt;/div&gt;
              &lt;/a&gt;                    
            &lt;/div&gt;
            &lt;div class="kb-bottom panel-footer" ng-class="{'kb-top-pad':!c.data.canSuscribe}"&gt;
              &lt;button ng-if="c.data.canSuscribe &amp;&amp; !item.subscribed" 
                      id="subscribeButton_{{::item.sys_id}}"
                      ng-click="::c.updateSubscription(item, $event)"
                      class="subscribe-link sublink_{{::item.sys_id}} btn btn-link kb-subscribe"  
                      ng-focus="::c.updateSubText(item,0)"
                      ng-blur="::c.updateSubText(item,1)"
                      &gt;
                &lt;span class="sub-icon"&gt;
                	&lt;i class="fa fa-circle-o" aria-hidden="true"&gt;&lt;/i&gt;
                  &lt;span class="sub-text" aria-hidden="true"&gt;{{c.data.SUBSCRIBE_LABEL}}&lt;/span&gt;
                  &lt;span class="sr-only"&gt;{{c.getTranslatedText(c.data.subscribeText, item.title)}}&lt;/span&gt;
                &lt;/span&gt;
              &lt;/button&gt;
                
              &lt;button ng-if="c.data.canSuscribe &amp;&amp; item.subscribed"
                      id="subscribeButton_{{::item.sys_id}}"
                      ng-click="::c.updateSubscription(item, $event)"                      
                      class="subscribe-link sublink_{{::item.sys_id}} btn btn-link kb-subscribe"  
                      ng-focus="::c.updateSubText(item,0)"
                      ng-mouseover="::c.updateSubText(item,0)"
                      ng-blur="::c.updateSubText(item,1)"
                      ng-mouseleave="c.updateSubText(item,1)"&gt;
                &lt;span class="unsub-icon"&gt;
                  &lt;i class="fa fa-check-circle" aria-hidden="true"&gt;&lt;/i&gt;
                  &lt;span data-hover="${Unsubscribe}" class="unsub-text unsub_{{::item.sys_id}}"&gt;
                    &lt;span aria-hidden="true"&gt;{{item.subscribedLabel?item.subscribedLabel:c.data.SUBSCRIBED_LABEL}}&lt;/span&gt;
                    &lt;span class="sr-only"&gt;{{c.getTranslatedText(c.data.unsubscribeText, item.title)}}&lt;/span&gt;
                  &lt;/span&gt;
                &lt;/span&gt;
              
              &lt;/button&gt;
            &lt;/div&gt;
         &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="kb-show-more self-clear col-xs-12" data-ng-if="c.data.result ? c.data.result.length &gt; 4 : false"&gt;
      &lt;button class="btn btn-link" aria-expanded="{{!c.showMoreLink}}" data-ng-click="c.showMoreLink ? c.toggleKbTiles('more') : c.toggleKbTiles('less')"&gt;
        &lt;span class="show_more"  data-ng-if="c.showMoreLink"&gt;
          &lt;span class="sr-only"&gt;${Show All Knowledge Bases}&lt;/span&gt;
          &lt;span aria-hidden="true"&gt;${Show All}&amp;nbsp;&lt;i class="fa fa-plus" aria-hidden="true"&gt;&lt;/i&gt;&lt;/span&gt;
        &lt;/span&gt;
        &lt;span class="show_less"  data-ng-if="!c.showMoreLink"&gt;
          &lt;span class="sr-only"&gt;${Show Less Knowledge Bases}&lt;/span&gt;
          &lt;span aria-hidden="true"&gt;${Show Less}&amp;nbsp;&lt;i class="fa fa-minus" aria-hidden="true"&gt;&lt;/i&gt;&lt;/span&gt;
        &lt;/span&gt;
      &lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;style&gt;
  .kb-browse-{{::c.data.instanceid}} .kb-browse-tiles{
    display: table;
    margin: 0 auto;
  }
  .kb-browse-{{::c.data.instanceid}} .kb-browse-tiles-more{
    display: block;
    margin: 0 5rem;
  }
  /*---------------------------- */
  .kb-browse-{{::c.data.instanceid}} .kb-tile-block {
    padding: 0 1rem;
    width:25rem;
  }
  .kb-browse-{{::c.data.instanceid}} .kb-tile-block-more {
    padding: 0 1rem;
    width:25%;
  }
  @media screen and (max-width: 1200px){
    .kb-browse-{{::c.data.instanceid}} .kb-browse-tiles{
      margin: 0 5rem;
      display: flex;
      margin: 0 auto;
    }
    .kb-browse-{{::c.data.instanceid}} .kb-browse-tiles-more{
      display: block;
      margin: 0 15rem;
    }
    .kb-browse-{{::c.data.instanceid}} .kb-browse-tiles-2{
      display: table;
      margin: 0 auto;
    }
    .kb-browse-{{::c.data.instanceid}} .kb-browse-tiles-1{
      display: table;
      margin: 0 auto;
    }
    /*---------------------------- */
    .kb-browse-{{::c.data.instanceid}} .kb-tile-block {
      padding: 0 1rem;
      width:50%
    }
    .kb-browse-{{::c.data.instanceid}} .kb-tile-block-2{
      width:25rem;
    }
    .kb-browse-{{::c.data.instanceid}} .kb-tile-block-1{
      width:25rem;
    }
  }
  @media screen and (max-width: 798px){

    .kb-browse-{{::c.data.instanceid}} .kb-browse-tiles{
      display: table;
      margin: 0 auto;
    }
    .kb-browse-{{::c.data.instanceid}} .kb-browse-tiles-3{
      display: block;
      margin: 0 auto;
    }
    /*---------------------------- */
    .kb-browse-{{::c.data.instanceid}} .kb-tile-block {
      padding: 0 1rem;
      width:50%;
    }
    .kb-browse-{{::c.data.instanceid}} .kb-tile-block-2{
      width:25rem;
    }
    .kb-browse-{{::c.data.instanceid}} .kb-tile-block-1{
      width:25rem;
    }
  }
  @media screen and (max-width: 546px){

    .kb-browse-{{::c.data.instanceid}} .kb-browse-tiles-3{
      display: block;
      margin: 0 auto;
    }
    .kb-browse-{{::c.data.instanceid}} .kb-browse-tiles-2{
      display: flex;
      margin: 0 auto;
    }
    .kb-browse-{{::c.data.instanceid}} .kb-browse-tiles-1{
      display: table;
      margin: 0 auto;
    }
    /*---------------------------- */
    .kb-browse-{{::c.data.instanceid}} .kb-tile-block {
      padding: 0 0.4rem;
    }
    .kb-browse-{{::c.data.instanceid}} .kb-tile-block-2{
      width:50%;
    }
    .kb-browse-{{::c.data.instanceid}} .kb-tile-block-1{
      width:25rem;
    }
  }


&lt;/style&gt;]]&gt;&lt;/template&gt;
    &lt;/sp_widget&gt;
&lt;/record_update&gt;</payload>
        <payload_hash>878578628</payload_hash>
        <record_name>LH CSM Knowledge Bases Browse</record_name>
        <reverted_from/>
        <source>36286f44876ae5107cb6eced3fbb3583</source>
        <source_table>sys_upgrade_history</source_table>
        <state>previous</state>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2023-04-27 11:39:44</sys_created_on>
        <sys_id>87d86b88876ae5107cb6eced3fbb3591</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_recorded_at>187c2831a0b0000001</sys_recorded_at>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2023-04-27 11:39:44</sys_updated_on>
        <type>Widget</type>
        <update_guid>47d86b88d56ae5104e292bbc6f646d91</update_guid>
        <update_guid_history>47d86b88d56ae5104e292bbc6f646d91:878578628</update_guid_history>
    </sys_update_version>
    <sys_metadata_delete action="INSERT_OR_UPDATE">
        <sys_audit_delete display_value="LH CSM Knowledge Bases Browse">a38934fc873ee5507cb6eced3fbb35b4</sys_audit_delete>
        <sys_class_name>sys_metadata_delete</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2023-05-11 17:04:57</sys_created_on>
        <sys_db_object display_value="" name="sp_widget">sp_widget</sys_db_object>
        <sys_id>0639ec366d6d4da8972723181a31e610</sys_id>
        <sys_metadata>01c6282b1b3121505bdeed71f54bcb32</sys_metadata>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>LH CSM Knowledge Bases Browse</sys_name>
        <sys_package display_value="Support case" source="x_liisa_support_ca">80d47c06dba7f05001eafad3f3961926</sys_package>
        <sys_parent/>
        <sys_policy/>
        <sys_scope display_value="Support case">80d47c06dba7f05001eafad3f3961926</sys_scope>
        <sys_scope_delete display_value="">60e14331f19d4bcba92dd8cbc47a66d9</sys_scope_delete>
        <sys_update_name>sp_widget_01c6282b1b3121505bdeed71f54bcb32</sys_update_name>
        <sys_update_version display_value="sp_widget_01c6282b1b3121505bdeed71f54bcb32">87d86b88876ae5107cb6eced3fbb3591</sys_update_version>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2023-05-11 17:04:57</sys_updated_on>
    </sys_metadata_delete>
</record_update>
